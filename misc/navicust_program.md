# ナビカスプログラム

Falzar USで`0x0813944c`から配置されているNCPのデータは1色あたり0x10バイトであり、それが4色分あるので合計0x40バイトになります。

```go

type pointer = uint32

type NCP struct {
    ConflictGroup byte
    Texture byte
    Unk02 byte
    Color byte
    Bug byte
    Unk05, Unk06, Unk07 byte
    UncompressedNCPShape pointer
    CompressedNCPShape pointer
}
```

## コンフリクトグループ(NCP.ConflictGroup)

コマンドライン上ではナビカスプログラムは右から左に実行されていきます。

NCPが、以前に実行されたNCPと同じコンフリクトグループを持つことが判明した場合、そのNCPはスキップされます。

これは、同じグループのNCPを2つ設置した場合、一番右端のNCPのみが実行されることを意味します。ゲーム内では以下のコンフリクトグループが使用されています。

例えば、オイルボディとアイムフィッシュは同じコンフリクトグループに属するので2つ配置して実行してもどちらか1つの効果しか適用されません。

```
1: スーパーアーマー (only one in its group, but I think these modify the Busting Level)
2: シールド, リフレクト, カワリミマジック (Left+B系)
3: オイルボディ, アイムフィッシュ, バッテリーモード, ジャングルランド
4: ユーモアセンス, リズミカルポエム
5: サーチシャッフル, ナンバーオープン (カスタム画面の内容を変更する系)
```

他のナビカスプログラムはコンフリクトグループの影響は受けません。(おそらくコンフリクトグループと同様にグルーピングがなされているが影響を受けないように設定されている？)

NCPが正しいグループを持っているかどうかを確認することが重要です。コンフリクトグループはプラスパーツには影響しないと思います。

## ナビカスバグ(NCP.Bug)

ナビカスパーツを正しく適用しなかった時に生じるバグの種類

 id | 内容
 -- | -- 
 00 | バグ無し
 01 | いどうバグ
 02 | ココロバグ
 03 | いどうでヒビ
 04 | カスタムOPバグ
 05 | エンカウントバグ
 06 | コレクターバグ
 07 | バスター空撃ち
 08 | サポートバグ
 09 | HPバグ
 0a | ???
 0b | ステータスバグ
 0c | ステータスバグ

## 参考記事

- [BN6 NCP format](https://forums.therockmanexezone.com/bn6-ncp-format-t5257.html)